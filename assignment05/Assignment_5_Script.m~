clear
clc
img = imread('peppers.png');

%% Exercise 1 - Color Distribution

% a) Display color distribution in rgb cube
rgb = figure(1);
assignment5_1a(img);
title('rgb');

% b) Display color distribution in hsv cone
hsv = figure(2);
assignment5_1b(img);
title('hsv')

%% Exercise 2 - k-Means Clustering

% Convert image matrix into array
array = zeros(size(img,1) * size(img,2), size(img,3));
for row = 1:size(img,1)
    array( size(img,2)*row - size(img,2)+1:size(img,2)*row,:) = img(row,:,:);
end

% a) Implementation of k-means
k = 5;

[idx, C] = kmeans(array, k);

% b) Region labelling

out = labelClusters(size(img,1), size(img,2), size(img,3), idx, C);

figure(3)
imshow(out)
title('Labeled clusters')

% c) Evaluation of results for good k

figure(4)
subplot(2,2,1);
[idx, C] = kmeans(array, 3);

imshow(
[idx, C] = kmeans(array, 5);

[idx, C] = kmeans(array, 7);

[idx, C] = kmeans(array, k);
% After some trials k=5 seemed like a reasonable choice to seperate
% the image into segments. Each pepper can be seen individually. 
% By increasing the k-value, shadows are introduced which do not contribute
% to the overall segmentation. With less k's the peppers start to merge in
% color and cannot be seperated anymore.

% d) HSV



% e) Application of k-means to camera stream

for i = 1:100
    
end